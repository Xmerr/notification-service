services:
  notification-service:
    build: .
    environment:
      - RABBITMQ_URL=${RABBITMQ_URL}
      - DISCORD_WEBHOOK_DEFAULT=${DISCORD_WEBHOOK_DEFAULT}
      - DISCORD_WEBHOOK_INFO=${DISCORD_WEBHOOK_INFO:-}
      - DISCORD_WEBHOOK_PRS=${DISCORD_WEBHOOK_PRS:-}
      - DISCORD_WEBHOOK_MEDIA=${DISCORD_WEBHOOK_MEDIA:-}
      - DISCORD_WEBHOOK_ALERTS=${DISCORD_WEBHOOK_ALERTS:-}
      - DISCORD_WEBHOOK_ERRORS=${DISCORD_WEBHOOK_ERRORS:-}
      - DISCORD_ROUTE_CI=${DISCORD_ROUTE_CI:-info}
      - DISCORD_ROUTE_PR=${DISCORD_ROUTE_PR:-prs}
      - DISCORD_ROUTE_DOWNLOADS=${DISCORD_ROUTE_DOWNLOADS:-media}
      - DISCORD_ROUTE_DEPLOY=${DISCORD_ROUTE_DEPLOY:-info}
      - DISCORD_ROUTE_POLLING=${DISCORD_ROUTE_POLLING:-alerts}
      - DISCORD_ROUTE_DLQ=${DISCORD_ROUTE_DLQ:-alerts}
      - DISCORD_ERROR_ROUTES=${DISCORD_ERROR_ROUTES:-ci.failure,deploy.failure,dlq,polling.failure}
      - LOKI_HOST=${LOKI_HOST:-http://192.168.0.100:3101}
      - LOG_LEVEL=${LOG_LEVEL:-info}
    restart: unless-stopped
